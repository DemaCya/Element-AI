import { BirthData, BaziData } from '@/types'

export class GeminiService {
  static async analyzePersonality(birthData: BirthData, baziData: BaziData): Promise<string> {
    // 占位文字 - 待后续接入真实Gemini API
    return `🌟 **基于您的八字命盘的深度人格分析** 🌟

**您的命主特征：${baziData.dayMaster}**
您的命主${baziData.dayMaster}展现了独特的人格特质。这是一个充满潜力的命盘，显示出您拥有与生俱来的洞察力和适应能力。

**核心人格特质**
根据您的天干地支组合，您天生具有敏锐的直觉和深刻的思考能力。${baziData.heavenlyStems.join('、')}的组合让您在面对挑战时能够灵活应变，同时保持内心的坚定。

**性格优势**
• 天生的领导才能和组织能力
• 出色的沟通技巧和人际关系处理能力
• 强烈的责任感和道德标准
• 对知识和智慧的不懈追求
• 在压力下保持冷静和理性

**成长挑战**
人生中的主要挑战在于平衡理想与现实。您可能会在某些时候过于追求完美，需要学会接受不完美并享受过程。情感表达方面可能需要更加开放和直接。

**社交风格**
在社交场合中，您倾向于通过深思熟虑的发言来影响他人。您的言行举止往往体现出成熟和智慧，容易获得他人的信任和尊重。

**情感世界**
您的情感深度丰富，但表达方式可能比较内敛。建立亲密关系需要时间，但一旦建立，会是非常稳固和深刻的连接。

**学习与发展**
您在学习方面具有天赋，特别是对抽象概念和复杂系统的理解。持续学习和自我提升将是您人生的重要主题。

**领导特质**
您具备天生的领导才能，更喜欢通过以身作则来影响他人，而非强硬的控制。在团队中常常成为智囊和稳定器。`
  }

  static async analyzeCareer(birthData: BirthData, baziData: BaziData): Promise<string> {
    // 占位文字 - 待后续接入真实Gemini API
    return `💼 **您的职业发展与财富指南** 💼

**最适合的职业领域**
基于您的五行配置和命主特征，以下领域特别适合您的天赋发展：

🎯 **核心推荐职业：**
• **教育咨询行业** - 您天生具有传授知识的能力
• **创意设计领域** - 独特的审美和创新能力
• **人力资源管理** - 出色的人际洞察力和协调能力
• **心理咨询** - 深刻的理解力和同理心
• **项目管理** - 优秀的组织能力和全局观

**创业潜质评估**
您的命盘显示出中等偏上的创业潜力。成功的关键在于：
- 选择与您命主五行相符的行业
- 寻找可靠的合作伙伴补足短板
- 在适当的时机（通常在30-35岁后）考虑创业

**财富累积策略**
🏦 **理财建议：**
• 偏好稳健的投资方式，避免高风险投机
• 重视长期资产配置，特别是房产和教育投资
- 建立多元化收入来源，降低单一依赖
• 定期储蓄，养成良好财务习惯

**职场环境偏好**
您在以下环境中工作状态最佳：
- 文化氛围开放、包容的工作环境
- 有成长空间和学习机会的组织
- 能够发挥创意和主动性岗位
- 团队合作良好、人际关系和谐的氛围

**职业发展时机**
📅 **关键发展期：**
• 25-30岁：技能积累和人脉建设期
• 30-35岁：事业稳定期，适合寻求晋升
• 35-45岁：事业黄金期，可考虑创业或转型
• 45岁后：经验变现期，适合指导他人

**收入提升建议**
- 持续学习专业技能，保持竞争力
- 建立个人品牌和专业声誉
- 拓展人脉网络，发现更多机会
- 培养副业或被动收入来源

**职场人际关系**
您的沟通风格偏向温和但有原则，需要注意：
- 在关键时刻要敢于表达自己的观点
- 学会适当拒绝，避免过度承担
- 建立良好的上下级关系
- 在团队中找到自己的定位`
  }

  static async analyzeRelationships(birthData: BirthData, baziData: BaziData): Promise<string> {
    // 占位文字 - 待后续接入真实Gemini API
    return `💕 **您的情感关系深度解析** 💕

**爱情模式与偏好**
您的命主${baziData.dayMaster}展现了独特的爱情观和情感模式。您在感情中寻求深度的精神连接，而非表面的激情。

💝 **爱情特质：**
• 重视精神层面的契合和价值观的一致
• 情感表达比较内敛，但内心情感丰富
• 对伴侣忠诚度极高，一旦投入会很专一
• 喜欢通过行动而非言语表达爱意
• 在关系中需要一定的独立空间

**最佳配对类型**
根据您的五行配置，您与以下类型的伴侣最为契合：
🔥 **火属性人**：能够激发您的热情和活力
🌱 **木属性人**：与您有共同的成长理念
🌊 **水属性人**：能够理解您深沉的情感世界

**沟通风格建议**
在亲密关系中，您的沟通方式：
- 偏好深度交流，闲聊较少
- 倾向于思考后再表达，不会冲动发言
- 重视逻辑和理性，有时会忽略情感需求
- 需要学习更直接地表达情感需求

**情感需求核心**
您在关系中最重要的需求：
✨ **深层连接**：需要能够理解您内心世界的人
🛡️ **安全感**：需要稳定和可预测的关系环境
🎯 **共同成长**：希望与伴侣一起进步和提升
🏠 **私人空间**：需要保持一定程度的独立性

**婚姻与长期关系**
您的命盘显示婚姻运势总体良好：
• 适合在28-32岁之间考虑婚姻
• 婚后生活会比较稳定和谐
• 与配偶能够形成良好的互补关系
• 家庭责任感强，会为家庭付出很多

**家庭关系模式**
🏡 **与家人相处：**
- 对父母有较强的责任感
- 可能在教育子女方面比较严格
- 重视家庭传统和价值观
- 家庭氛围会比较温馨但不够轻松

**友谊社交模式**
您的交友特点：
- 朋友数量不多但质量很高
- 更喜欢小圈子深度交往
- 对朋友非常忠诚和信任
- 能够成为朋友中的智囊和倾听者

**恋爱建议**
💌 **实用建议：**
- 不要因为害怕受伤而封闭内心
- 学会适当表达情感需求
- 选择能够理解您内在世界的伴侣
- 在关系中保持适度的独立性
- 给彼此足够的时间和空间成长`
  }

  static async analyzeLifePath(birthData: BirthData, baziData: BaziData): Promise<string> {
    // 占位文字 - 待后续接入真实Gemini API
    return `🌟 **您的人生使命与灵魂道路** 🌟

**生命核心使命**
根据您的八字命盘分析，您此生的核心使命是通过智慧和洞察力来帮助他人成长。您的命主${baziData.dayMaster}赋予您独特的能力，能够在复杂的情况中看到本质，并为他人指明方向。

🎯 **灵魂任务：**
• 成为知识与智慧的传播者
• 在混乱中建立秩序和和谐
• 帮助他人发现自我价值和潜能
• 通过个人经历启发和指引他人
• 在物质世界中建立精神层面的价值

**主要人生功课**
每个人的灵魂在今生都有需要学习和成长的重要课题：

📚 **核心学习主题：**
1. **平衡的艺术** - 学会在理想与现实之间找到平衡点
2. **情感的深度** - 学习更加开放和直接地表达内心感受
3. **接受不完美** - 理解完美主义的局限性，拥抱生活的真实面貌
4. **信任宇宙** - 学会在不确定中保持信心和耐心
5. **服务他人** - 将个人智慧用于帮助和提升他人

**人生阶段与转折**
您的人生会经历几个重要的发展阶段：

🌱 **25-35岁：基础建设期**
这个阶段专注于学习技能、建立人脉和积累经验。是为未来打基础的重要时期。

⭐ **35-45岁：事业黄金期**
您的天赋和能力在这个阶段得到充分发挥，事业和影响力达到顶峰。

🌙 **45-55岁：转型期**
可能面临重要的职业或生活方向的转变，是重新评估人生意义的时期。

🌟 **55岁以后：智慧分享期**
将积累的智慧和经验传授给他人，成为导师和指引者的角色。

**精神成长路径**
您的精神发展具有独特的轨迹：

🧘 **内在修炼：**
- 通过冥想和反思获得内在智慧
- 学习倾听内在声音和直觉指引
- 培养对生命更深层次的理解
- 发展同理心和慈悲心
- 建立与更高意识的连接

**挑战与突破**
人生中的主要挑战往往是最重要的成长机会：

🔥 **转化挑战：**
• 完美主义转化为接纳和宽恕
• 过度思考转化为直觉信任
• 控制欲望转化为随遇而安
• 独立倾向转化为合作意识
• 理性主导转化为情感平衡

**隐藏天赋与潜能**
您的命盘中还隐藏着一些尚未被完全发掘的潜能：

✨ **潜在才能：**
• 天生的教学和指导能力
• 跨领域整合思维的能力
• 在危机中保持冷静的领导力
• 对艺术和美的敏感度
• 治愈和帮助他人的天赋

**人生传承与贡献**
您最终的人生贡献将体现在：

🌍 **影响力领域：**
- 知识的传播和教育的改进
- 帮助他人找到人生方向
- 在专业领域建立新的标准
- 通过个人经历启发和鼓舞他人
- 为社会带来积极的变化和进步

**灵魂成长建议**
🌟 **实践指引：**
- 保持学习和成长的心态
- 定期反思和内省
- 寻找良师益友的指导
- 勇敢面对恐惧和挑战
- 相信生命的安排和时机
- 用自己的经历帮助他人`
  }

  static async analyzeHealth(birthData: BirthData, baziData: BaziData): Promise<string> {
    // 占位文字 - 待后续接入真实Gemini API
    return `🌿 **您的健康与养生之道** 🌿

**体质特点与优势**
根据您的五行配置，您的体质展现出独特的特点。您的命主${baziData.dayMaster}与五行分布共同构成了您的健康基础。

💪 **先天优势：**
• 具备较强的自我修复能力
• 对环境变化有较好的适应力
• 免疫系统相对强健
• 新陈代谢功能良好
• 精神状态较为稳定

**需要关注的健康领域**
基于您的命盘分析，以下健康领域需要特别关注：

⚠️ **重点关照：**
• **消化系统健康** - 避免暴饮暴食，保持规律饮食
• **睡眠质量** - 建立良好的睡眠习惯，避免熬夜
• **压力管理** - 学习有效的放松技巧和压力释放方法
• **颈椎脊柱** - 注意坐姿，定期进行拉伸运动
• **情绪平衡** - 关注情绪波动对身体健康的影响

**季节性养生建议**
您的身体在不同季节需要不同的调养方式：

🌸 **春季（木旺）**
- 重点养肝：保持心情舒畅，避免愤怒
- 饮食宜清淡：多吃绿色蔬菜
- 适度运动：选择伸展性强的运动
- 作息调整：早睡早起，顺应自然

☀️ **夏季（火旺）**
- 重点养心：避免过度兴奋和焦虑
- 饮食宜苦味：适当吃苦瓜、莲子等
- 避免暴晒：保护阳气，避免中暑
- 保持水分：适量补充水分和电解质

🍂 **秋季（金旺）**
- 重点养肺：注意呼吸道保养
- 饮食宜润燥：多吃梨、百合等润肺食物
- 情绪调节：避免悲伤和忧思
- 适度运动：增强肺功能和免疫力

❄️ **冬季（水旺）**
- 重点养肾：注意保暖，避免寒邪入侵
- 饮食宜温热：适量食用温补食物
- 早睡晚起：顺应冬藏之道
- 节制房事：保精养神，积蓄阳气

**生活方式建议**
根据您的体质特点，推荐以下生活方式：

🏃 **运动建议：**
• 选择温和的有氧运动，如散步、游泳、太极
• 避免过度剧烈的竞技性运动
• 重视运动的规律性和持续性
• 结合呼吸训练，如瑜伽、冥想
• 户外运动与室内运动相结合

🥗 **饮食指导：**
- 保持饮食规律，定时定量
- 选择新鲜、天然的食材
- 避免过度加工和刺激性食物
- 根据季节调整饮食结构
- 适量补充优质蛋白质和维生素

**压力管理策略**
您的性格特质可能导致内在压力累积：

🧘 **放松技巧：**
- 每日进行15-30分钟的冥想或深呼吸
- 培养兴趣爱好，转移注意力
- 学习时间管理，避免过度承诺
- 与朋友家人保持良好沟通
- 定期进行身体放松，如按摩、泡澡

**心理健康维护**
重视心理健康对整体健康的重要性：

💭 **心理调适：**
- 接受自己的不完美，降低自我要求
- 学会合理表达情感需求
- 建立健康的边界意识
- 培养积极乐观的思维模式
- 寻求专业帮助的勇气

**定期健康检查**
建议您制定以下健康检查计划：

📅 **检查项目：**
• 每年一次全面体检
• 定期检查消化系统功能
• 关注心血管健康指标
• 女性注意妇科检查，男性注意前列腺检查
• 根据年龄增加针对性检查项目

**养生小贴士**
🌟 **日常实践：**
- 保持良好的个人卫生习惯
- 注意居住环境的通风和采光
- 避免长时间使用电子设备
- 培养早睡早起的作息规律
- 学会倾听身体的信号和需求

**中医养生建议**
结合传统中医智慧：

🍵 **养生方法：**
- 适量饮用养生茶，如菊花茶、枸杞茶
- 学习简单的经络按摩和穴位按压
- 根据体质选择合适的中药调理
- 注意情志调养，保持心平气和
- 顺应四时变化，调整生活方式

记住，健康是一个整体的概念，需要身心灵的全面平衡。预防胜于治疗，养成良好的生活习惯是保持健康的关键。`
  }

  static async generateComprehensiveReport(birthData: BirthData, baziData: BaziData): Promise<{
    personality: string
    career: string
    relationships: string
    lifePath: string
    health: string
  }> {
    try {
      // Generate all analyses in parallel for better performance
      const [personality, career, relationships, lifePath, health] = await Promise.all([
        this.analyzePersonality(birthData, baziData),
        this.analyzeCareer(birthData, baziData),
        this.analyzeRelationships(birthData, baziData),
        this.analyzeLifePath(birthData, baziData),
        this.analyzeHealth(birthData, baziData)
      ])

      return {
        personality,
        career,
        relationships,
        lifePath,
        health
      }
    } catch (error) {
      console.error('Error generating comprehensive report:', error)
      throw new Error('Failed to generate report')
    }
  }
}